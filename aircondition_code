# Imports the libraries we use.
import time
from grovepi import *
from grove_rgb_lcd import *

# Sets Grove-Relay @ D4
relay = 4
# Sets Grove-Temp @ D7
sensor = 7
# Sets Grove-LED @ D3
led = 3

# Sets components to Output
pinMode(relay,"OUTPUT")
pinMode(led,"OUTPUT")

# DHT sensor input
blue = 0

while True:
    try:
        [temp,humidity] = dht(sensor,blue)
        
        if math.isnan(temp) == False:
            print(temp)
            setRGB ( 210,55,30 ) #Sets the display colour.
            
        if float(temp) > 28.0:
            digitalWrite(relay,1)
            digitalWrite(led,1)
            setText ("Temperaturen er " + str (temp))
            time.sleep(5)
        else:
            digitalWrite(relay,0)
            digitalWrite(led,0)
            setText ("Temperaturen er " + str (temp))
            time.sleep(5)
                
    except KeyboardInterrupt:   # Turn LED and Relay off before stopping
        digitalWrite(relay,0)
        digitalWrite(led,0)       
        break              
    except IOError:
        print ("Error")
